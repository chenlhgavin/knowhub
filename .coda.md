# CODA Repository Overview

> Auto-generated by CODA. Keep in sync with the codebase.

## Project Overview

KnowHub is a content-driven technical knowledge base built with Astro that serves as an
educational platform covering Rust, Python, and software architecture. It combines a
statically-generated website (the presentation layer) with standalone curriculum tracks
containing lessons, exercises, and runnable code projects. The site renders markdown/MDX
content collections into a browsable knowledge hub deployed to GitHub Pages at
`https://chenlhgavin.github.io/knowhub`, providing structured learning paths for developers.
All curriculum content is written in Chinese (中文).

## Architecture Overview

```
┌─────────────────────────────────────────────────────────────┐
│                     GitHub Pages (Deploy)                    │
│              chenlhgavin.github.io/knowhub                  │
└──────────────────────────┬──────────────────────────────────┘
                           │ static HTML/CSS/JS
┌──────────────────────────┴──────────────────────────────────┐
│  site/                    PRESENTATION LAYER                 │
│  ┌──────────┐ ┌──────────┐ ┌───────────┐ ┌──────────────┐  │
│  │  pages/   │ │components│ │  layouts/  │ │   styles/    │  │
│  │ (routes)  │ │ (React + │ │(BaseLayout│ │ (Tailwind 4) │  │
│  │          │ │  Astro)  │ │  shell)   │ │              │  │
│  └────┬─────┘ └──────────┘ └───────────┘ └──────────────┘  │
│       │ getStaticPaths()                                     │
│  ┌────┴─────────────────────────────────────────────────┐   │
│  │  data/topics.ts          CONTENT CATALOG              │   │
│  │  (Topic[], Article[] definitions & helper functions)  │   │
│  └────┬─────────────────────────────────────────────────┘   │
│       │ Astro Content Collection API                         │
│  ┌────┴─────────────────────────────────────────────────┐   │
│  │  content/                CONTENT COLLECTIONS           │   │
│  │  rust/ python/ architecture/ multimodal-agent/        │   │
│  │  presentations/          (.md / .mdx files)           │   │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                    CURRICULUM LAYER (standalone)              │
│  ┌──────────────┐ ┌────────────┐ ┌───────────────────────┐  │
│  │ rustascent/   │ │  python/   │ │   architecture/       │  │
│  │ 20 lessons    │ │ 10 chapters│ │   6 modules           │  │
│  │ Cargo wkspace │ │ exercises  │ │   lessons/exercises   │  │
│  │ 3 projects    │ │ 3 projects │ │   answer keys         │  │
│  └──────────────┘ └────────────┘ └───────────────────────┘  │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│               REFERENCE & FIXTURES LAYER                     │
│  ┌──────────────────┐  ┌──────────────────────────────────┐ │
│  │ fixtures/         │  │ vendors/                         │ │
│  │ test scripts for  │  │ vendored third-party source      │ │
│  │ Claude Agent SDK  │  │ (Claude Agent SDK Python)        │ │
│  └──────────────────┘  └──────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

- **site/** — Astro 5 static site generator; the primary deliverable. Renders content
  collections into HTML pages. No server runtime.
- **rustascent/** — Rust learning track with 20 lessons and a Cargo workspace containing
  three projects (hello_rust, httpie, scrape_url). Independent of the site.
- **python/** — Python learning track with 10 progressive chapters, exercises/solutions,
  and 3 capstone projects.
- **architecture/** — Software architecture curriculum with 6 modules, each containing
  lessons, exercises, and answer keys.
- **fixtures/, vendors/** — Test fixtures and vendored third-party source for analysis.

No runtime coupling exists between layers. The site references curriculum content only via
Astro's content collection API and static data files.

## Interface Design

| Name | Module | Abstracts | Purpose |
|------|--------|-----------|---------|
| `Topic` / `Article` | `site/src/data/topics.ts` | Content catalog schema | Defines slug, name, icon, color, articles[] for topics and slug, title, summary, tags, date for articles. All page routes derive listings from these types. |
| Content Collections | `site/src/content.config.ts` | Typed markdown indexing | Maps directory-based .md/.mdx files to queryable collections (rust, python, architecture, multimodal-agent, presentations) with Zod passthrough schemas. |
| `BaseLayout` | `site/src/layouts/BaseLayout.astro` | Page shell | Root layout providing HTML structure, navigation, footer, meta tags, and global styles for all pages. |
| Dynamic Routes | `site/src/pages/topics/[slug].astro` | URL-to-content resolution | File-based routing with `getStaticPaths()` — resolves topic/article slugs to rendered content pages. |
| Helper functions | `site/src/data/topics.ts` | Content querying | `getTopic()`, `getTopicsSummary()`, `getAllArticles()`, `getAllTags()`, `getStats()` — typed accessors for the content catalog used by page routes and components. |

## Data Flow

### Article Rendering Pipeline

```
Author writes .md/.mdx ──► Register in topics.ts ──► content.config.ts indexes
        │                        │                           │
        ▼                        ▼                           ▼
  site/src/content/{topic}/   slug, title, tags, date   Zod schema validation
                                                             │
        ┌────────────────────────────────────────────────────┘
        ▼
  [slug].astro getStaticPaths() enumerates all articles
        │
        ▼
  Astro renders markdown → HTML, injects into BaseLayout
        │
        ▼
  Static HTML output to dist/ → deployed to GitHub Pages
```

### Topic Browsing Flow

```
  index.astro ──► topics.ts helpers ──► TopicCard / ArticleCard components
       │                                        │
       ▼                                        ▼
  Homepage with topic summaries          Clickable cards with metadata
       │                                        │
       ▼                                        ▼
  topics/[slug].astro (topic detail)     topics/[slug]/[article].astro
```

## Core Data Structures

- **Topic** (`site/src/data/topics.ts`): `{ slug, name, icon, color, description, heroImage?, articles: Article[] }` — top-level content category (rust, python, architecture, etc.)
- **Article** (`site/src/data/topics.ts`): `{ slug, title, summary, tags, date, updated?, readingTime?, image? }` — individual content entry within a topic
- **Content Collection Entry** (`site/src/content.config.ts`): Astro-managed type wrapping markdown frontmatter + body, validated by Zod schemas with passthrough mode
- **Rust domain types** (in sub-projects): `httpie` uses clap-derived CLI structs, reqwest-based HTTP types, and anyhow/thiserror error enums

## Module Guide

| Directory | Purpose |
|-----------|---------|
| `site/` | Astro-based knowledge hub website (primary deliverable) |
| `site/src/pages/` | Page routes: index, about, topics/[slug], presentations/[slug] |
| `site/src/components/` | Reusable Astro + React UI components (cards, content, interactive, layout, sections) |
| `site/src/content/` | Content collections: rust, python, architecture, multimodal-agent, presentations |
| `site/src/data/` | TypeScript data modules: topic/article catalog and helpers |
| `site/src/layouts/` | Layout components (BaseLayout) |
| `rustascent/` | Rust learning track: 20 lessons, docs, slides, Cargo workspace projects |
| `rustascent/projects/` | Runnable Rust projects: hello_rust, httpie, scrape_url |
| `python/` | Python learning track: 10 chapters with exercises/solutions, 3 capstone projects |
| `python/projects/` | Python capstone projects: expense_tracker, text_analyzer, task_scheduler |
| `architecture/` | Software architecture curriculum: 6 modules with lessons, exercises, and answers |
| `fixtures/` | Test fixtures for Claude Agent SDK Python analysis |
| `vendors/` | Vendored third-party source code |
| `specs/` | Design specs and analysis documents |

## Tech Stack & Dependencies

| Category | Technology | Role |
|----------|-----------|------|
| Languages | TypeScript, Astro, Rust, Python, MDX/Markdown, CSS | Multi-language monorepo |
| Site Framework | Astro 5 | Static site generation, content collections, file-based routing |
| UI Framework | React 19 | Interactive components within Astro islands |
| Styling | Tailwind CSS 4 | Utility-first CSS via @tailwindcss/vite |
| Animations | GSAP | Scroll and entrance animations |
| Icons | lucide-react | Icon components |
| Diagrams | Mermaid | In-article diagram rendering |
| Rust Runtime | Tokio | Async runtime for Rust sub-projects |
| Rust HTTP | reqwest | HTTP client in httpie project |
| Rust CLI | clap | CLI argument parsing |
| Rust Errors | thiserror, anyhow | Error handling (library / application) |
| Rust Serialization | serde_json | JSON serialization |
| Build | npm, Vite (via Astro), Cargo | Build tooling per language |

## Development Workflow

```bash
# Site development
cd site && npm install          # Install dependencies
cd site && npm run dev          # Dev server at localhost:4321/knowhub
cd site && npm run build        # Production build to dist/
cd site && npm run preview      # Preview production build

# Rust projects
cd rustascent && cargo build --workspace    # Build all Rust projects
cd rustascent && cargo test --workspace     # Run all Rust tests
cd rustascent && cargo +nightly fmt         # Format Rust code
cd rustascent && cargo clippy --workspace   # Lint Rust code
```

## Key Patterns & Conventions

- **Content-driven architecture**: All site pages derive from typed content collections
  and a centralized topic catalog. No runtime data fetching.
- **Component organization**: Components are grouped by concern — cards, content,
  interactive, layout, sections — under `site/src/components/`.
- **Static generation**: The site is fully static (no SSR). All routes resolved at build
  time via `getStaticPaths()`.
- **Astro islands**: React components are used selectively for interactive widgets;
  most content is rendered as static Astro components.
- **Rust error handling**: `thiserror` for typed library errors with `#[source]`,
  `anyhow` with `.context()` for application-level propagation. `unwrap()`/`expect()`
  prohibited in production code.
- **Rust concurrency**: Tokio async runtime, message-passing via channels preferred
  over shared state, Actor model for subsystem isolation.
- **Content collections**: Zod schemas use passthrough mode for flexibility. Content
  is organized by topic in separate directories.
- **No runtime coupling**: The three layers (site, curriculum, reference) are independent.
  The site reads content at build time only.
- **Licensing**: MIT license (see `LICENSE` at repo root).
